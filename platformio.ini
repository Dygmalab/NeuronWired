;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env]
test_framework = unity

[env:rpipico]
platform = https://github.com/maxgerhardt/platform-raspberrypi.git
board = rpipico
framework = arduino
board_build.core = earlephilhower
build_type = debug
build_flags =
    '-DF_CPU=133000000L'
    '-D__RP2040__'
    '-DUSE_TINYUSB'
    '-DBOARD_VENDORID=0x35EF'
    '-DBOARD_PRODUCTID=0x0010'
    '-DBOARD_MANUFACTURER="DYGMA"'
    '-DBOARD_PRODUCT="DEFY"'
    '-DUSBCON'
    '-DKALEIDOSCOPE_HARDWARE_H="Kaleidoscope-Hardware-Dygma-DefyWN.h"'
    '-DKALEIDOSCOPE_LED_CONTROL_H="kaleidoscope/plugin/LEDControl.h"'
    '-DEEPROM_EMULATION_SIZE=8192'
    '-DHAL_CFG_MCU=HAL_MCU_RP2040'
    '-DMCU_ALIGNMENT_SIZE=4'
    -DNEURON_WIRED
    -O0
    -I src
    -I Kaleidoscope\src\kaleidoscope\driver\hid\Keyboardio.h
    -I lib/KeyboardioHID/src
    -I lib/SPISlave/src
    ${sysenv.BUILD_FLAG_FIRMWARE_VERSION}
lib_deps =
    Wire
    lib/Communications/Communications
    lib/kaleidoscope/kaleidoscope/src
    lib/KeyboardioHID/KeyboardioHID
    lib/PluginLedLibrary/PluginLedLibrary
    lib/PluginUpgrade/PluginUpgrade
    lib/RP_platform
    lib/Fifo_buffer
    lib/EEPROM
    lib/SPISlave

; debug config
debug_tool = jlink
upload_protocol = jlink

;  J-Link configuration(opcional)
debug_server =
   C:\Program Files\SEGGER\JLink_V792a\JLinkGDBServerCL.exe
  -singlerun
  -nogui
  -if swd
  -port 50000
  -swoport 50001
  -telnetport 50002
  -device RP2040_M0_0
  -endian little
  -speed 4000
  -swoport 2332